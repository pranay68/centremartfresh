rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // System pointer doc for current products snapshot (single doc)
    match /system/productsSnapshot {
      allow read: if true;
      allow write: if request.auth != null; // dev-friendly: any signed-in user can write pointer
    }

    // Snapshot collections: products_updates/{version}/items/{doc}
    match /products_updates/{version}/items/{docId} {
      allow read: if true;
      allow write: if request.auth != null; // dev-friendly
    }

    // Snapshot collections: products_snapshot_{{version}}/{doc}
    match /products_snapshot_{version}/{docId} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // Deny by default elsewhere
    match /{document=**} {
      allow read, write: if false;
    }
  }
}



